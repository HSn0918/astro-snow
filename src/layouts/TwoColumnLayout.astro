---
import { cn } from '@lib/utils';
import { MAX_WIDTH } from '@constants/layout';
import PostFooter from '@/components/post/PostFooter.astro';
import Footer from '@/components/layout/Footer.astro';
import type { BlogPost } from '@/types/blog';

interface Props {
  className?: string;
  post?: BlogPost;
  siderFixed?: boolean;
}

const { className, post, siderFixed = false } = Astro.props;
---

<div class="flex flex-col">
  <slot name="cover" />
  <div
    class={cn(
      'mx-auto md:mx-0 flex w-full items-start justify-center gap-6 lg:gap-10 md:w-full',
      MAX_WIDTH.content,
      className
    )}
  >
    {
      siderFixed ? (
        <div class="mx-6 lg:mx-8 tablet:hidden w-64">
          <div class="fixed top-20 w-64 left-[max(1.5rem,calc((100%-80rem)/2+1.5rem))] lg:left-[max(2rem,calc((100%-80rem)/2+2rem))]">
            <slot name="sider" />
          </div>
        </div>
      ) : (
        <div class="mx-6 lg:mx-8 tablet:hidden">
          <slot name="sider" />
        </div>
      )
    }
    <div class="flex min-w-0 grow flex-col gap-8 md:w-full">
      <slot />
      <PostFooter post={post} />
      <Footer />
    </div>
  </div>
</div>
